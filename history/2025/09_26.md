Anyway I started from **UEFI**. Put all unneccessaries aside and let's see what should we do with it.

found some tutorials and documentations below:  

[从零开始的UEFI裸机编程](https://kagurazakakotori.github.io/ubmp-cn/index.html "greetings")  

[UEFI Specification](https://uefi.org/specs/UEFI/2.11/ "hello")  

[UEFI_ffi](https://docs.rs/uefi-ffi/latest/uefi_ffi/ "search UEFI types and alias")

从零开始的UEFI裸机编程 1.2.1  

> *UEFI标准文档中有一个叫做“协议（Protocol）”的概念。在UEFI中，功能被分为一个个单元，这些单元被称为“协议”，并且它们被定义成以_PROTOCOL结尾的结构体。名如~_PROTOCOL这样的结构体包含一系列的函数指针，通过这些函数指针可以调用UEFI固件中的内置功能。*  

The design is a type of **Object-Oriented Program**  

``` C
// an example of FILE_PROTOCOL
typedef struct EFI_FILE_PROTOCOL
{
    UINT64 Revision;
    EFI_FILE_OPEN Open;
    EFI_FILE_CLOSE Close;
    EFI_FILE_READ Read;
    EFI_FILE_WRITE Write;
    EFI_FILE_SET_POSITION SetPosition;
    EFI_FILE_GET_INFO GetInfo;
    //more function pointers
} EFI_FILE_PROTOCOL;

// typedef of function pointer
typedef EFI_STATUS (EFIAPI *EFI_FILE_OPEN)
(
    IN EFI_FILE_PROTOCOL *This,
    OUT EFI_FILE_PROTOCOL **NewHandle,
    IN CHAR16 *FileName,
    IN UINT64 OpenMode,
    IN UINT64 Attributes
);
```

on the example above, it defined a **PROTOCOL**, which contains several **Function Pointer**. A function pointer is a pointer that points to a function or to say a function pointer stores address of a function.

A protocol is kind of like **Class** in c++ while function pointers act as **Member**.

A protocol here is responsible for one function, and function pointer points to the real instance will carry out the specific implementations.
And finally all these physical operations are assigned to hardware.

Call `EFI_FILE_PROTOCOL -> Open` is kind like you write `File.open()` in C++.  
